<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="Python 爬虫入门基础"><meta name="keywords" content="-Python -爬虫"><meta name="author" content="WALL-E"><meta name="copyright" content="WALL-E"><title>Python 爬虫入门基础 | MH's Blog</title><link rel="shortcut icon" href="/img/EVE.ico"><link rel="stylesheet" href="/css/index.css?version=1.7.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.7.0"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script src="https://v1.hitokoto.cn/?encode=js&amp;charset=utf-8&amp;select=.footer_custom_text" defer></script><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  }
} </script><meta name="generator" content="Hexo 5.4.2"></head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="true"><div class="toggle-sidebar-info text-center"><span data-toggle="切换文章详情">切换站点概览</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%88%AC%E8%99%AB%E7%9A%84%E7%AE%80%E4%BB%8B"><span class="toc-number">1.</span> <span class="toc-text"> 爬虫的简介</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E7%88%AC%E8%99%AB"><span class="toc-number">1.1.</span> <span class="toc-text"> 什么是爬虫</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E7%88%AC%E8%99%AB"><span class="toc-number">1.2.</span> <span class="toc-text"> 为什么要爬虫</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E7%88%AC%E8%99%AB%E7%9A%84%E5%B0%BA%E5%AF%B8"><span class="toc-number">1.3.</span> <span class="toc-text"> 网络爬虫的尺寸</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E5%B0%8F%E8%8A%82"><span class="toc-number">2.</span> <span class="toc-text"> 第一小节</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#http%E5%8D%8F%E8%AE%AE%E4%B8%8Erequests%E5%BA%93%E6%96%B9%E6%B3%95"><span class="toc-number">2.1.</span> <span class="toc-text"> HTTP协议与Requests库方法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-http%E5%8D%8F%E8%AE%AE%E6%A6%82%E5%BF%B5"><span class="toc-number">2.1.1.</span> <span class="toc-text"> 1. HTTP协议概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-http%E5%8D%8F%E8%AE%AE%E5%AF%B9%E8%B5%84%E6%BA%90%E7%9A%84%E6%93%8D%E4%BD%9C"><span class="toc-number">2.1.2.</span> <span class="toc-text"> 2. HTTP协议对资源的操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-http%E5%8D%8F%E8%AE%AE%E4%B8%8Erequest%E5%BA%93"><span class="toc-number">2.1.3.</span> <span class="toc-text"> 3. HTTP协议与Request库</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#requests%E5%BA%93%E4%B8%BB%E8%A6%81%E6%96%B9%E6%B3%95%E8%A7%A3%E6%9E%90"><span class="toc-number">2.2.</span> <span class="toc-text"> Requests库主要方法解析</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#request%E6%96%B9%E6%B3%95"><span class="toc-number">2.2.1.</span> <span class="toc-text"> request方法：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#get"><span class="toc-number">2.2.2.</span> <span class="toc-text"> get</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#head"><span class="toc-number">2.2.3.</span> <span class="toc-text"> head</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#post"><span class="toc-number">2.2.4.</span> <span class="toc-text"> post</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#put"><span class="toc-number">2.2.5.</span> <span class="toc-text"> put</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#patch"><span class="toc-number">2.2.6.</span> <span class="toc-text"> patch</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#delete"><span class="toc-number">2.2.7.</span> <span class="toc-text"> delete</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%88%AC%E5%8F%96%E7%BD%91%E9%A1%B5%E7%9A%84%E9%80%9A%E7%94%A8%E4%BB%A3%E7%A0%81%E6%A1%86%E6%9E%B6"><span class="toc-number">2.3.</span> <span class="toc-text"> 爬取网页的通用代码框架</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E4%B8%AA%E4%BE%8B%E5%AD%90"><span class="toc-number">2.3.1.</span> <span class="toc-text"> 一个例子</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#robots-%E5%8D%8F%E8%AE%AE"><span class="toc-number">2.4.</span> <span class="toc-text"> Robots 协议</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E5%B0%8F%E8%8A%82-%E6%A1%88%E4%BE%8B"><span class="toc-number">3.</span> <span class="toc-text"> 第二小节 ：案例</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E5%B0%8F%E8%8A%82beautiful-soup"><span class="toc-number">4.</span> <span class="toc-text"> 第三小节：beautiful soup</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85"><span class="toc-number">4.1.</span> <span class="toc-text"> 安装</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A7%A3%E6%9E%90%E6%A1%88%E4%BE%8B"><span class="toc-number">4.2.</span> <span class="toc-text"> 解析案例</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A7%A3%E6%9E%90%E5%99%A8"><span class="toc-number">4.3.</span> <span class="toc-text"> 解析器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E5%85%83%E7%B4%A0"><span class="toc-number">4.4.</span> <span class="toc-text"> 基本元素</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E5%9B%9B%E5%B0%8F%E8%8A%82"><span class="toc-number">5.</span> <span class="toc-text"> 第四小节</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%88%AC%E8%99%AB%E7%9A%84%E6%8A%80%E6%9C%AF%E5%AE%9E%E7%8E%B0"><span class="toc-number">5.1.</span> <span class="toc-text"> 爬虫的技术实现</span></a></li></ol></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="/img/WallET.png"></div><div class="author-info__name text-center">WALL-E</div><div class="author-info__description text-center"></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">文章</span><span class="pull-right">9</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">标签</span><span class="pull-right">12</span></a></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(/img/bg5.JPG)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">MH's Blog</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">主页</a><a class="site-page" href="/slides">幻灯</a><a class="site-page" href="/archives">归档</a><a class="site-page" href="/tags">标签</a><a class="site-page" href="/categories">分类</a></span><span class="pull-right"></span></div><div id="post-info"><div id="post-title">Python 爬虫入门基础</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-11-19</time></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><p>介绍Python爬虫的入门基础知识</p>
<span id="more"></span>
<p>[TOC]</p>
<blockquote>
<p>参考教程：</p>
<p><a target="_blank" rel="noopener" href="https://book.apeland.cn/details/53/">路飞学城</a></p>
</blockquote>
<h1 id="爬虫的简介"><a class="markdownIt-Anchor" href="#爬虫的简介"></a> 爬虫的简介</h1>
<h2 id="什么是爬虫"><a class="markdownIt-Anchor" href="#什么是爬虫"></a> 什么是爬虫</h2>
<ul>
<li>形象概念： 爬虫，即网络爬虫，大家可以理解为在网络上爬行的一直蜘蛛，互联网就比作一张大网，而爬虫便是在这张网上爬来爬去的蜘蛛咯，如果它遇到资源，那么它就会抓取下来。想抓取什么？这个由你来控制它。</li>
<li>学术概念：爬虫就是通过编写程序<strong>模拟</strong>浏览器上网，让其去互联网上<strong>抓取</strong>数据的过程。</li>
</ul>
<h2 id="为什么要爬虫"><a class="markdownIt-Anchor" href="#为什么要爬虫"></a> 为什么要爬虫</h2>
<ul>
<li>抓取互联网上的数据，为我所用，有了大量的数据，就如同有了一个数据银行一样，下一步做的就是如何将这些爬取的数据产品化，商业化。</li>
<li>从就业的角度来说，爬虫工程师目前来说属于紧缺人才，并且薪资待遇普遍较高所以，深层次地掌握这门技术，对于就业来说，是非常有利的。有些人学习爬虫可能为了就业或者跳槽。从这个角度来说，爬虫工程师是不错的选择之一。随着大数据时代的来临，爬虫技术的应用将越来越广泛，在未来会拥有更好的发展空间。</li>
</ul>
<h2 id="网络爬虫的尺寸"><a class="markdownIt-Anchor" href="#网络爬虫的尺寸"></a> 网络爬虫的尺寸</h2>
<p align="center">
  <img width="80%" src="/2020/11/19/python-tut/spider_size.png">
</p>
<h1 id="第一小节"><a class="markdownIt-Anchor" href="#第一小节"></a> 第一小节</h1>
<h2 id="http协议与requests库方法"><a class="markdownIt-Anchor" href="#http协议与requests库方法"></a> HTTP协议与Requests库方法</h2>
<h3 id="1-http协议概念"><a class="markdownIt-Anchor" href="#1-http协议概念"></a> 1. HTTP协议概念</h3>
<ul>
<li>超文本传输协议</li>
<li>基于”请求与响应“模式的、无状态的应用层协议</li>
<li>采用URL作为定位网络资源的标识，格式 <code>http://host[:port][path]</code>
<ul>
<li>host: 合法的Internet主机域名或IP地址</li>
<li>port：端口号，缺省值为80</li>
<li>path：请求资源的路径</li>
</ul>
</li>
<li>HTTP协议示例：
<ul>
<li><code>http://www.bit.edu.cn</code>，北理工校园网首页</li>
<li><code>http://220.181.111.188/duty</code>，表示这样一台IP主机上duty目录下的相关资源</li>
</ul>
</li>
<li>理解URL：通过HTTP协议存取资源的Internet路径，一个URL对应一个数据资源</li>
</ul>
<h3 id="2-http协议对资源的操作"><a class="markdownIt-Anchor" href="#2-http协议对资源的操作"></a> 2. HTTP协议对资源的操作</h3>
<ul>
<li>操作方法分类</li>
</ul>
<table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>GET</td>
<td>请求获取URL位置的资源</td>
</tr>
<tr>
<td>HEAD</td>
<td>请求获取URL位置资源的响应消息报告，即获得该资源的头部信息</td>
</tr>
<tr>
<td>POST</td>
<td>请求向URL位置的资源后附加新的数据</td>
</tr>
<tr>
<td>PUT</td>
<td>请求向URL位置存储一个资源，覆盖原URL位置的资源</td>
</tr>
<tr>
<td>PATCH</td>
<td>请求局部更新URL位置的资源，即改变该处资源的部分内容</td>
</tr>
<tr>
<td>DELETE</td>
<td>请求删除URL位置存储的资源</td>
</tr>
</tbody>
</table>
<ul>
<li>操作方法示意图</li>
</ul>
<p align="center">
  <img width="60%" src="/2020/11/19/python-tut/HTTP_methods.png">
</p>
<h3 id="3-http协议与request库"><a class="markdownIt-Anchor" href="#3-http协议与request库"></a> 3. HTTP协议与Request库</h3>
<p align="center">
  <img width="70%" src="/2020/11/19/python-tut/HTTP_methods_request.png">
</p>
<ul>
<li>Requests库的<code>head()</code>方法</li>
<li>Requests库的<code>get()</code>方法</li>
<li>Requests库的<code>post()</code>方法</li>
<li>Requests库的<code>put()</code>方法</li>
<li>Requests库的<code>patch()</code>方法</li>
<li>Requests库的<code>delete()</code>方法</li>
</ul>
<h2 id="requests库主要方法解析"><a class="markdownIt-Anchor" href="#requests库主要方法解析"></a> Requests库主要方法解析</h2>
<h3 id="request方法"><a class="markdownIt-Anchor" href="#request方法"></a> request方法：</h3>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">requests.request(method,url,**kwargs)</span><br></pre></td></tr></table></figure>
<ul>
<li>
<p><code>method</code>：请求方式，对应 get/put/post/put/patch/delete/options 7种</p>
</li>
<li>
<p><code>url</code>：拟获取页面的 url 链接</p>
</li>
<li>
<p><code>**kwargs</code>：控制访问的参数，共13个，均为可选项</p>
<ul>
<li>
<p><strong>params</strong>：字典或字节序列，均作为参数增加到url中</p>
<p align="center">
<img width="90%" src="/2020/11/19/python-tut/request_params_demo.png">
</p>
</li>
<li>
<p><strong>data</strong>：字典、字节序列或文件对象，作为Request的内容</p>
<p align="center">
<img width="90%" src="/2020/11/19/python-tut/request_data_demo.png">
</p>
</li>
<li>
<p><strong>json</strong>：JSON格式的数据，作为Request的内容</p>
</li>
<li>
<p>headers：字典，HTTP定制头，user-agent，</p>
</li>
<li>
<p>cookies：</p>
</li>
<li>
<p>auth：元组</p>
</li>
<li>
<p>files：字典类型，传输文件</p>
</li>
<li>
<p>timeout：设定超时时间</p>
</li>
<li>
<p>proxies：字典类型，设定访问代理</p>
</li>
<li>
<p>allow_redirects：T/F</p>
</li>
<li>
<p>stream：</p>
</li>
<li>
<p>verify：</p>
</li>
<li>
<p>cert：</p>
</li>
</ul>
</li>
</ul>
<h3 id="get"><a class="markdownIt-Anchor" href="#get"></a> get</h3>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">requests.get(url,params=<span class="literal">None</span>,**kwargs) </span><br><span class="line"><span class="comment"># url:拟获取页面的url链接</span></span><br><span class="line"><span class="comment"># params:url中的额外参数，字典或字节流格式，可选</span></span><br><span class="line"><span class="comment"># kwargs: 12个控制访问的参数</span></span><br></pre></td></tr></table></figure>
<h3 id="head"><a class="markdownIt-Anchor" href="#head"></a> head</h3>
  <figure class="highlight python"><table><tr><td class="code"><pre><span class="line">requests.head(url,**kwargs) </span><br><span class="line"><span class="comment"># url:拟获取页面的url链接</span></span><br><span class="line"><span class="comment"># **kwargs: 13个控制访问的参数</span></span><br></pre></td></tr></table></figure>
<h3 id="post"><a class="markdownIt-Anchor" href="#post"></a> post</h3>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">requests.post(url,data=<span class="literal">None</span>,json=<span class="literal">None</span>,**kwargs) </span><br><span class="line"><span class="comment"># url: 拟更新页面的url链接</span></span><br><span class="line"><span class="comment"># data: 字典、字节序列或文件对象，作为Request的内容</span></span><br><span class="line"><span class="comment"># json: JSON格式的数据，作为Request的内容</span></span><br><span class="line"><span class="comment"># kwargs: 11个控制访问的参数</span></span><br></pre></td></tr></table></figure>
<h3 id="put"><a class="markdownIt-Anchor" href="#put"></a> put</h3>
  <figure class="highlight python"><table><tr><td class="code"><pre><span class="line">requests.put(url,data=<span class="literal">None</span>,**kwargs) </span><br><span class="line"><span class="comment"># url:拟更新页面的url链接</span></span><br><span class="line"><span class="comment"># data:字典、字节序列或文件对象，作为Request的内容</span></span><br><span class="line"><span class="comment"># **kwargs: 12个控制访问的参数</span></span><br></pre></td></tr></table></figure>
<h3 id="patch"><a class="markdownIt-Anchor" href="#patch"></a> patch</h3>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">requests.patch(url,data=<span class="literal">None</span>,**kwargs) </span><br><span class="line"><span class="comment"># url:拟更新页面的url链接</span></span><br><span class="line"><span class="comment"># data:字典、字节序列或文件对象，作为Request的内容</span></span><br><span class="line"><span class="comment"># kwargs: 12个控制访问的参数</span></span><br></pre></td></tr></table></figure>
<h3 id="delete"><a class="markdownIt-Anchor" href="#delete"></a> delete</h3>
  <figure class="highlight python"><table><tr><td class="code"><pre><span class="line">requests.delete(url,**kwargs) </span><br><span class="line"><span class="comment"># url:拟获取页面的url链接</span></span><br><span class="line"><span class="comment"># **kwargs: 13个控制访问的参数</span></span><br></pre></td></tr></table></figure>
<h2 id="爬取网页的通用代码框架"><a class="markdownIt-Anchor" href="#爬取网页的通用代码框架"></a> 爬取网页的通用代码框架</h2>
<h3 id="一个例子"><a class="markdownIt-Anchor" href="#一个例子"></a> 一个例子</h3>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">getHTMLText</span>(<span class="params">url</span>):</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        r = requests.get(url, timeout=<span class="number">30</span>)</span><br><span class="line">        r.raise_for_status() <span class="comment">#如果状态不是200，引发HTTPError异常</span></span><br><span class="line">        r.encoding = r.apparent_encoding</span><br><span class="line">        <span class="keyword">return</span> r.text</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;产生异常&quot;</span></span><br><span class="line">    </span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    url = <span class="string">&quot;http://www.baidu.com&quot;</span></span><br><span class="line">    <span class="built_in">print</span>(getHTMLText(url))</span><br></pre></td></tr></table></figure>
<h2 id="robots-协议"><a class="markdownIt-Anchor" href="#robots-协议"></a> Robots 协议</h2>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 注释：*代表所有，/代表根目录</span></span><br><span class="line">User-agent: *</span><br><span class="line">Disallow: /</span><br></pre></td></tr></table></figure>
<ul>
<li>遵守方式</li>
</ul>
<h1 id="第二小节-案例"><a class="markdownIt-Anchor" href="#第二小节-案例"></a> 第二小节 ：案例</h1>
<ul>
<li>
<p><strong>案例：百度的关键词搜索接口</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">https://www.baidu.com/s?wd=keyword</span><br></pre></td></tr></table></figure>
<ul>
<li>
<p>替换<code>keyword</code>即可</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line">keyword= <span class="string">&quot;Python&quot;</span> <span class="comment"># 搜索的关键字</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    kw = &#123;<span class="string">&#x27;wd&#x27;</span>:keyword&#125;</span><br><span class="line">    r  = requests.get(<span class="string">&quot;https://www.baidu.com/s&quot;</span>, params = kw)</span><br><span class="line">    <span class="built_in">print</span>(r.request.url)</span><br><span class="line">    r.raise_for_status()</span><br><span class="line">    <span class="built_in">print</span>(<span class="built_in">len</span>(r.text))</span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;爬取失败&quot;</span>)</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li>
<p><strong>案例：网络图片的爬取和存储</strong>，以url中的名字来命名图片</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line">url = <span class="string">&quot;https://i0.hippopx.com/photos/683/318/324/wolf-wolves-snow-wolf-landscape-preview.jpg&quot;</span></span><br><span class="line">root = <span class="string">&quot;./Saved/&quot;</span></span><br><span class="line">path = root + url.split(<span class="string">&quot;/&quot;</span>)[-<span class="number">1</span>]</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(root):</span><br><span class="line">        os.mkdir(root)</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(path):</span><br><span class="line">        r = requests.get(url)</span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(path, <span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">            f.write(r.content)</span><br><span class="line">            f.close()</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;文件保存成功&quot;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;文件已存在&quot;</span>)</span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;爬取失败&quot;</span>)</span><br></pre></td></tr></table></figure>
</li>
<li>
<p><strong>案例：IP地址归属地的自动查询</strong>，</p>
<ul>
<li><code>www.ip138.com</code></li>
<li>接口形式：<code>https://www.ip138.com/iplookup.asp?ip=IPaddress&amp;action=2</code></li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># %% IP地址查询</span></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line">headers =&#123;<span class="string">&#x27;User-Agent&#x27;</span>:<span class="string">&#x27;Mozilla/5.0&#x27;</span>&#125;</span><br><span class="line">url = <span class="string">&quot;https://www.ip138.com/iplookup.asp&quot;</span></span><br><span class="line">IPaddress = <span class="string">&#x27;202.204.80.112&#x27;</span></span><br><span class="line">Action = <span class="string">&#x27;2&#x27;</span></span><br><span class="line">kw = &#123;<span class="string">&quot;ip&quot;</span>:IPaddress,<span class="string">&quot;action&quot;</span>:Action&#125;</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    r = requests.get(url, params = kw, headers=headers)</span><br><span class="line">    r.raise_for_status()</span><br><span class="line">    r.encoding = r.apparent_encoding</span><br><span class="line">    <span class="built_in">print</span>(r.text)</span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;爬取失败&quot;</span>)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="第三小节beautiful-soup"><a class="markdownIt-Anchor" href="#第三小节beautiful-soup"></a> 第三小节：beautiful soup</h1>
<p><a target="_blank" rel="noopener" href="http://python123.io/ws/demo.html">http://python123.io/ws/demo.html</a></p>
<h2 id="安装"><a class="markdownIt-Anchor" href="#安装"></a> 安装</h2>
<p><code>pip install beautifulsoup4</code></p>
<h2 id="解析案例"><a class="markdownIt-Anchor" href="#解析案例"></a> 解析案例</h2>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line">r = requests.get(<span class="string">&quot;https://python123.io/ws/demo.html&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(r.text)</span><br><span class="line">demo = r.text</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;\n\n============\n\n&quot;</span>)</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup  <span class="comment"># 引入</span></span><br><span class="line">soup = BeautifulSoup(demo,<span class="string">&quot;html.parser&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(soup.prettify())</span><br></pre></td></tr></table></figure>
<h2 id="解析器"><a class="markdownIt-Anchor" href="#解析器"></a> 解析器</h2>
 <p align="center">
  <img width="70%" src="/2020/11/19/python-tut/beautifulSoupParse.png">
  <br>
  <em>解析器</em>
</p>
<h2 id="基本元素"><a class="markdownIt-Anchor" href="#基本元素"></a> 基本元素</h2>
<p align="center">
  <img width="60%" src="/2020/11/19/python-tut/beautifulSoupElement.png">
</p>
<ul>
<li>
<p><strong>五种基本元素</strong></p>
<ul>
<li>Tag</li>
<li>Name</li>
<li>Attributes</li>
<li>NavigableString</li>
<li>Comment</li>
</ul>
<p align="center">
  <img width="80%" src="/2020/11/19/python-tut/beautifulSoupElement1.png">
</p>
</li>
</ul>
<h1 id="第四小节"><a class="markdownIt-Anchor" href="#第四小节"></a> 第四小节</h1>
<ul>
<li>
<p><strong>准备工作</strong></p>
<p>通过浏览器查看分析目标网页，学习编程基础规范。</p>
</li>
<li>
<p><strong>获取网页</strong></p>
</li>
<li>
<p><strong>分析网页（提取数据）</strong></p>
</li>
<li>
<p><strong>存储数据</strong></p>
</li>
</ul>
<h2 id="爬虫的技术实现"><a class="markdownIt-Anchor" href="#爬虫的技术实现"></a> 爬虫的技术实现</h2>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">WALL-E</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://minhuanguo.github.io/2020/11/19/python-tut/">https://minhuanguo.github.io/2020/11/19/python-tut/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://minhuanguo.github.io">MH's Blog</a>！</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Python-%E7%88%AC%E8%99%AB/">-Python -爬虫</a></div><nav id="pagination"><div class="next-post pull-right"><a href="/2020/07/17/PMSM-Control-Based-on-STM32F103/"><span>PMSM Control Based on STM32F103</span><i class="fa fa-chevron-right"></i></a></div></nav></div></div><footer class="footer-bg" style="background-image: url(/img/bg5.JPG)"><div class="layout" id="footer"><div class="copyright">&copy;2020 - 2022 By WALL-E</div><div class="framework-info"><span>驱动 - </span><a target="_blank" rel="noopener" href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 - </span><a target="_blank" rel="noopener" href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="footer_custom_text">hitokoto</div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.7.0"></script><script src="/js/fancybox.js?version=1.7.0"></script><script src="/js/sidebar.js?version=1.7.0"></script><script src="/js/copy.js?version=1.7.0"></script><script src="/js/fireworks.js?version=1.7.0"></script><script src="/js/transition.js?version=1.7.0"></script><script src="/js/scroll.js?version=1.7.0"></script><script src="/js/head.js?version=1.7.0"></script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.9.0/katex.min.css"><script src="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.css"><script src="/js/katex.js"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script></body></html>